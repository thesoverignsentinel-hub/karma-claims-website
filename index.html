<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Karma Claims | Fight Corporate Delays</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #1a365d; --secondary: #2563eb; --accent: #dc2626; 
            --success: #16a34a; --bg: #f0f4f8; --surface: #ffffff; 
            --border: #e2e8f0; --text: #0f172a; --text-muted: #64748b;
        }

        *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background: var(--bg);
            background-image: radial-gradient(ellipse at 10% 10%, rgba(37,99,235,0.05) 0%, transparent 45%), radial-gradient(ellipse at 90% 85%, rgba(26,54,93,0.07) 0%, transparent 45%);
            color: var(--text); font-family: 'Inter', -apple-system, sans-serif; min-height: 100vh; display: flex; flex-direction: column;
        }

        /* ‚îÄ‚îÄ NAV ‚îÄ‚îÄ */
        .nav { background: var(--primary); height: 58px; display: flex; align-items: center; justify-content: space-between; padding: 0 28px; position: sticky; top: 0; z-index: 200; box-shadow: 0 2px 16px rgba(26,54,93,0.28); }
        .nav-brand { font-weight: 800; font-size: 18px; color: white; letter-spacing: -0.02em; }
        .nav-brand span { color: #60a5fa; }
        .nav-link { color: rgba(255,255,255,0.8); text-decoration: none; font-size: 13.5px; font-weight: 600; transition: color 0.2s; display: flex; align-items: center; gap: 6px; }
        .nav-link:hover { color: white; }

        /* ‚îÄ‚îÄ HERO ‚îÄ‚îÄ */
        .hero { text-align: center; padding: 50px 20px 30px; }
        .hero h1 { font-weight: 800; font-size: clamp(32px, 5vw, 48px); color: var(--primary); letter-spacing: -0.03em; margin-bottom: 12px; line-height: 1.1; }
        .hero p { font-size: 16px; color: var(--text-muted); max-width: 500px; margin: 0 auto; line-height: 1.5; }

        .wrapper { max-width: 700px; margin: 0 auto; padding: 0 20px; flex: 1; }

        /* ‚îÄ‚îÄ GENERATOR CARD ‚îÄ‚îÄ */
        .card { background: var(--surface); border: 1px solid var(--border); border-radius: 16px; padding: 32px; box-shadow: 0 10px 30px rgba(0,0,0,0.04); margin-bottom: 40px; }
        .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 16px; }
        .full-width { grid-column: 1 / -1; }

        .input-group label { display: block; font-weight: 700; font-size: 13.5px; color: var(--primary); margin-bottom: 6px; }
        .styled-input, .styled-textarea { width: 100%; padding: 12px 14px; border: 1.5px solid var(--border); border-radius: 8px; font-size: 14px; font-family: 'Inter', sans-serif; color: var(--text); background: #f8fafc; transition: all 0.2s; }
        .styled-input:focus, .styled-textarea:focus { outline: none; border-color: var(--secondary); background: white; box-shadow: 0 0 0 3px rgba(37,99,235,0.1); }
        .styled-textarea { resize: vertical; min-height: 100px; line-height: 1.5; }

        /* ‚îÄ‚îÄ CONSENT BOX ‚îÄ‚îÄ */
        .consent-box { background: #fef2f2; border: 1px solid #fca5a5; padding: 12px; border-radius: 8px; margin-bottom: 20px; display: flex; align-items: flex-start; gap: 10px; font-size: 12px; color: #991b1b; line-height: 1.4; }
        .consent-box input[type="checkbox"] { margin-top: 2px; accent-color: var(--accent); cursor: pointer;}
        .consent-box a { color: var(--accent); font-weight: 700; text-decoration: underline; cursor: pointer; }

        /* ‚îÄ‚îÄ BUTTON ‚îÄ‚îÄ */
        .btn-generate { background: var(--primary); color: white; width: 100%; padding: 14px; border: none; border-radius: 8px; font-family: 'Inter', sans-serif; font-weight: 700; font-size: 15px; cursor: pointer; transition: all 0.2s; display: flex; align-items: center; justify-content: center; gap: 8px; }
        .btn-generate:hover { background: var(--secondary); transform: translateY(-2px); box-shadow: 0 8px 20px rgba(37,99,235,0.25); }
        .btn-generate:disabled { opacity: 0.7; cursor: not-allowed; transform: none; box-shadow: none; }
        .spinner { display: none; width: 16px; height: 16px; border: 2.5px solid rgba(255,255,255,0.3); border-top-color: white; border-radius: 50%; animation: spin 0.8s linear infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }

        /* ‚îÄ‚îÄ RESULT AREA ‚îÄ‚îÄ */
        #result_area { display: none; animation: fadeUp 0.4s ease; margin-top: 30px; border-top: 2px solid var(--border); padding-top: 30px;}
        @keyframes fadeUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        .target-box { background: #eff6ff; border: 1px solid #bfdbfe; padding: 16px; border-radius: 10px; margin-bottom: 16px; display: flex; align-items: center; justify-content: space-between; gap: 10px; }
        .target-info { font-size: 13.5px; color: #1e40af; }
        .target-info strong { font-family: ui-monospace, monospace; font-size: 14.5px; }

        .proof-warning { background: #fffbeb; border-left: 4px solid #f59e0b; padding: 12px; margin-bottom: 16px; font-size: 13px; color: #92400e; border-radius: 0 8px 8px 0; font-weight: 600;}
        
        .draft-box { background: #f8fafc; border: 1px solid var(--border); border-radius: 10px; padding: 20px; margin-bottom: 20px; }
        .draft-content { font-family: ui-monospace, monospace; font-size: 13px; line-height: 1.6; color: var(--text); white-space: pre-wrap; }

        /* ‚îÄ‚îÄ 4 BOXES MAILING SYSTEM ‚îÄ‚îÄ */
        .mail-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; }
        .mail-btn { padding: 12px; border: 1px solid var(--border); border-radius: 8px; background: white; font-family: 'Inter', sans-serif; font-size: 14px; font-weight: 600; cursor: pointer; transition: all 0.2s; display: flex; align-items: center; justify-content: center; gap: 8px; color: var(--text);}
        .mail-btn:hover { background: #f1f5f9; border-color: #cbd5e1; transform: translateY(-1px); box-shadow: 0 4px 6px rgba(0,0,0,0.02);}
        .mail-btn.gmail { color: #ea4335; }
        .mail-btn.outlook { color: #0078d4; }
        .mail-btn.yahoo { color: #720e9e; }
        .mail-btn.apple { color: #000000; }

        /* ‚îÄ‚îÄ DASHBOARD BRIDGE ‚îÄ‚îÄ */
        .dashboard-bridge { text-align: center; margin-top: 20px; margin-bottom: 50px; }
        .dashboard-bridge a { display: inline-flex; align-items: center; gap: 8px; background: white; border: 2px solid var(--border); color: var(--primary); padding: 14px 28px; border-radius: 100px; text-decoration: none; font-weight: 700; font-size: 15px; transition: all 0.2s; box-shadow: 0 4px 12px rgba(0,0,0,0.03); }
        .dashboard-bridge a:hover { border-color: var(--secondary); color: var(--secondary); transform: translateY(-2px); box-shadow: 0 8px 24px rgba(37,99,235,0.1); }

        /* ‚îÄ‚îÄ MODAL ‚îÄ‚îÄ */
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(15, 23, 42, 0.6); backdrop-filter: blur(4px); display: none; align-items: center; justify-content: center; z-index: 9999; }
        .modal-content { background: white; width: 90%; max-width: 500px; border-radius: 12px; padding: 24px; box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1); position: relative; }
        .modal-close { position: absolute; top: 16px; right: 20px; font-size: 20px; cursor: pointer; color: var(--text-muted); border: none; background: none;}
        .modal-title { font-weight: 800; color: var(--primary); font-size: 18px; margin-bottom: 12px; border-bottom: 1px solid var(--border); padding-bottom: 10px;}
        .modal-text { font-size: 13px; color: var(--text); line-height: 1.6; max-height: 60vh; overflow-y: auto;}

        /* ‚îÄ‚îÄ FOOTER ‚îÄ‚îÄ */
        .footer { background: var(--primary); color: white; padding: 40px 20px; margin-top: auto; text-align: center; }
        .footer-links { display: flex; justify-content: center; gap: 20px; margin-bottom: 20px; flex-wrap: wrap; }
        .footer-links a { color: rgba(255,255,255,0.8); text-decoration: none; font-size: 14px; font-weight: 500; transition: color 0.2s; cursor: pointer; }
        .footer-links a:hover { color: white; text-decoration: underline; }
        .footer-text { font-size: 12.5px; color: rgba(255,255,255,0.5); line-height: 1.5;}

        @media (max-width: 600px) { .form-grid { grid-template-columns: 1fr; } .mail-grid{ grid-template-columns: 1fr;} }
    </style>
</head>
<body>

<nav class="nav">
    <div class="nav-brand">Karma<span>Claims</span></div>
    <a href="dashboard.html" class="nav-link">üìä Mission Control</a>
</nav>

<div class="hero">
    <h1>Fight Corporate BS. Legally.</h1>
    <p>AI generates a fierce, legally-sound grievance notice tailored to Indian consumer laws (CCPA/RBI) in seconds.</p>
</div>

<div class="wrapper">
    <div class="card">
        <div class="form-grid">
            <div class="input-group">
                <label>Your Name</label>
                <input type="text" id="user_name" class="styled-input" placeholder="e.g. Rahul Sharma" required>
            </div>
            <div class="input-group">
                <label>Your Email</label>
                <input type="email" id="user_email" class="styled-input" placeholder="rahul@example.com" required>
            </div>
            <div class="input-group">
                <label>Phone Number (with Country Code)</label>
                <input type="tel" id="user_phone" class="styled-input" placeholder="+91 9876543210" required>
            </div>
            <div class="input-group">
                <label>Order / Transaction ID</label>
                <input type="text" id="order_id" class="styled-input" placeholder="e.g. ODR-12345" required>
            </div>
            
            <div class="input-group full-width">
                <label>Target Company</label>
                <input list="company_list" id="company_name" class="styled-input" placeholder="Search (e.g. Swiggy, HDFC Bank...)" autocomplete="off" required>
                <datalist id="company_list">
                    <option value="Amazon India (Amazon Seller Services Pvt Ltd)"><option value="Flipkart (Flipkart Internet Pvt Ltd)"><option value="Myntra (Myntra Designs Pvt Ltd)"><option value="Meesho (Fashnear Technologies Pvt Ltd)"><option value="Nykaa (FSN E-Commerce Ventures)"><option value="Ajio (Reliance Retail Ltd)"><option value="Tata CLiQ (Tata UniStore Ltd)"><option value="Snapdeal (Snapdeal Pvt Ltd)"><option value="Swiggy (Bundl Technologies Pvt Ltd)"><option value="Zomato (Zomato Ltd)"><option value="Blinkit (Blink Commerce Pvt Ltd)"><option value="Zepto (Kiranakart Technologies Pvt Ltd)"><option value="BigBasket (Supermarket Grocery Supplies)"><option value="JioMart (Reliance Retail Ltd)"><option value="Licious (Delightful Gourmet Pvt Ltd)">
                    <option value="Google Pay (Google India Digital Services)"><option value="PhonePe (PhonePe Pvt Ltd)"><option value="Paytm (One97 Communications Ltd)"><option value="CRED (Dreamplug Technologies Pvt Ltd)"><option value="BharatPe (Resilient Innovations Pvt Ltd)"><option value="MobiKwik (One MobiKwik Systems Ltd)"><option value="Freecharge (Freecharge Payment Technologies)"><option value="Amazon Pay (Amazon Pay India Pvt Ltd)"><option value="Slice (Garagepreneurs Internet Pvt Ltd)"><option value="Jupiter (Amica Financial Technologies)">
                    <option value="HDFC Bank (HDFC Bank Limited)"><option value="SBI (State Bank of India)"><option value="ICICI Bank (ICICI Bank Limited)"><option value="Axis Bank (Axis Bank Limited)"><option value="Kotak Mahindra Bank (Kotak Mahindra Bank Ltd)"><option value="Punjab National Bank (PNB)"><option value="Bank of Baroda (BoB)"><option value="IndusInd Bank (IndusInd Bank Limited)"><option value="IDFC First Bank (IDFC FIRST Bank Ltd)"><option value="Yes Bank (YES BANK Limited)">
                    <option value="Ola Cabs (ANI Technologies Pvt Ltd)"><option value="Uber India (Uber India Systems Pvt Ltd)"><option value="Rapido (Roppen Transportation Services)"><option value="MakeMyTrip (MakeMyTrip India Pvt Ltd)"><option value="Goibibo (Ibibo Group Pvt Ltd)"><option value="EaseMyTrip (Easy Trip Planners Ltd)"><option value="Yatra (Yatra Online Ltd)"><option value="Cleartrip (Cleartrip Pvt Ltd)"><option value="RedBus (Ibibo Group Pvt Ltd)"><option value="IRCTC (Indian Railway Catering and Tourism Corp)">
                    <option value="Reliance Jio (Reliance Jio Infocomm Ltd)"><option value="Bharti Airtel (Bharti Airtel Ltd)"><option value="Vodafone Idea (Vi)"><option value="BSNL (Bharat Sanchar Nigam Limited)"><option value="ACT Fibernet (Atria Convergence Technologies)"><option value="Hathway (Hathway Cable & Datacom Ltd)"><option value="Excitel (Excitel Broadband Pvt Ltd)">
                    <option value="Byju's (Think & Learn Pvt Ltd)"><option value="Unacademy (Sorting Hat Technologies)"><option value="PhysicsWallah (PhysicsWallah Pvt Ltd)"><option value="Vedantu (Vedantu Innovations Pvt Ltd)"><option value="UpGrad (UpGrad Education Pvt Ltd)"><option value="Simplilearn (Simplilearn Solutions Pvt Ltd)"><option value="Cuemath (CueLearn Pvt Ltd)">
                    <option value="IndiGo (InterGlobe Aviation Ltd)"><option value="Air India (Air India Ltd)"><option value="SpiceJet (SpiceJet Ltd)"><option value="Akasa Air (SNV Aviation Pvt Ltd)"><option value="Air India Express (Air India Express Ltd)">
                    <option value="Samsung India (Samsung India Electronics)"><option value="Apple India (Apple India Pvt Ltd)"><option value="Xiaomi India (Xiaomi Technology India)"><option value="OnePlus India (OPlus Mobitech India)"><option value="Dell India (Dell International Services)"><option value="HP India (HP India Sales Pvt Ltd)"><option value="Lenovo India (Lenovo India Pvt Ltd)"><option value="LG India (LG Electronics India Pvt Ltd)"><option value="Sony India (Sony India Pvt Ltd)"><option value="boAt Lifestyle (Imagine Marketing Ltd)"><option value="Urban Company (UrbanClap Technologies)">
                </datalist>
            </div>

            <div class="input-group full-width">
                <label>Disputed Amount (‚Çπ)</label>
                <input type="number" id="disputed_amount" class="styled-input" placeholder="e.g. 5000" required>
            </div>

            <div class="input-group full-width">
                <label>Complaint Details</label>
                <textarea id="complaint_details" class="styled-textarea" placeholder="Briefly explain what went wrong. Did they refuse a refund? Cancel your order without paying you back?" required></textarea>
            </div>
        </div>

        <div class="consent-box">
            <input type="checkbox" id="legal_consent">
            <label for="legal_consent">
                I agree to the <a onclick="openModal()">Terms & Conditions</a>. I confirm I am NOT submitting any banking passwords, OTPs, or sensitive financial PINs.
            </label>
        </div>

        <button class="btn-generate" id="generate_btn" onclick="generateDraft()">
            <div class="spinner" id="btn_spinner"></div>
            <span id="btn_text">Draft Legal Notice ‚ö°</span>
        </button>

        <div id="result_area">
            <h3 style="color: var(--primary); margin-bottom: 15px;">Your Legal Package is Ready</h3>
            
            <div class="target-box">
                <div class="target-info">
                    Verified Nodal Officer Email: <br>
                    <strong id="target_email">...</strong>
                </div>
            </div>

            <div class="proof-warning">
                ‚ö†Ô∏è STOP: You must manually attach your proof (screenshots, receipts, chat logs) before you click send in your email client!
            </div>

            <div class="draft-box">
                <div class="draft-content" id="draft_text"></div>
            </div>

            <h4 style="color: var(--primary); margin-bottom: 10px;">Select your email provider to send:</h4>
            <div class="mail-grid">
                <button class="mail-btn gmail" onclick="sendMail('gmail')">‚úâÔ∏è Send via Gmail</button>
                <button class="mail-btn outlook" onclick="sendMail('outlook')">üìß Send via Outlook</button>
                <button class="mail-btn yahoo" onclick="sendMail('yahoo')">üü£ Send via Yahoo</button>
                <button class="mail-btn apple" onclick="sendMail('default')">üì± Send via Apple / Default</button>
            </div>
        </div>
    </div>

    <div class="dashboard-bridge">
        <a href="dashboard.html">
            üìä Open Active Case Dashboard <span>‚Üí</span>
        </a>
        <div class="bridge-sub">Track your deadlines, detect stalling tactics, and log your refunds.</div>
    </div>
</div>

<footer class="footer">
    <div class="footer-links">
        <a href="mailto:thesoverignsentinel@gmail.com">Contact Us</a>
        <a onclick="openModal()">Terms & Conditions</a>
        <a href="mailto:thesoverignsentinel@gmail.com">Investor Relations</a>
    </div>
    <div class="footer-text">
        &copy; 2026 Karma Claims. All rights reserved.<br>
        Disclaimer: This platform provides AI-assisted legal formatting. It does not constitute formal legal counsel.
    </div>
</footer>

<div class="modal-overlay" id="tc_modal">
    <div class="modal-content">
        <button class="modal-close" onclick="closeModal()">√ó</button>
        <h2 class="modal-title">Terms & Conditions</h2>
        <div class="modal-text">
            <p><strong>1. Not Legal Advice:</strong> Karma Claims is an AI-powered formatting tool designed to structure grievances according to general Indian consumer protection frameworks (e.g., CCPA, RBI). It does not provide formal legal counsel. Using this tool does not create an attorney-client relationship.</p>
            <p style="margin-top: 10px;"><strong>2. No Liability:</strong> The developers and owners of Karma Claims cannot be sued, held liable, or made legally responsible for any outcomes, lost funds, ignored emails, or corporate retaliation resulting from the use of the generated text. Users send these notices at their own risk.</p>
            <p style="margin-top: 10px;"><strong>3. Data Safety:</strong> You must never input your banking passwords, OTPs, CVVs, or ATM PINs into this platform. We only require the Order/Transaction ID for reference formatting.</p>
            <p style="margin-top: 10px;"><strong>4. Monitoring:</strong> By using the automated email links provided, you consent to blind-copying (BCC) the platform administrator strictly for the purpose of tracking metric success rates and abuse prevention.</p>
        </div>
    </div>
</div>

<script>
    const API_BASE = "https://karma-claims-backend.onrender.com";

    // Modal Logic
    function openModal() { document.getElementById('tc_modal').style.display = 'flex'; }
    function closeModal() { document.getElementById('tc_modal').style.display = 'none'; }

    let currentDraft = "";
    let currentEmail = "";
    let currentSubject = "";

    async function generateDraft() {
        const consent = document.getElementById('legal_consent').checked;
        if (!consent) { alert("You must agree to the Terms & Conditions and confirm you are not submitting sensitive passwords."); return; }

        const payload = {
            user_name: document.getElementById('user_name').value.trim(),
            user_email: document.getElementById('user_email').value.trim(),
            user_phone: document.getElementById('user_phone').value.trim(),
            company_name: document.getElementById('company_name').value.trim(),
            order_id: document.getElementById('order_id').value.trim(),
            disputed_amount: document.getElementById('disputed_amount').value.trim(),
            complaint_details: document.getElementById('complaint_details').value.trim()
        };

        if (!payload.user_name || !payload.company_name || !payload.complaint_details) {
            alert("Please fill in all required fields."); return;
        }

        const btn = document.getElementById('generate_btn');
        const spinner = document.getElementById('btn_spinner');
        const btnText = document.getElementById('btn_text');
        const resultArea = document.getElementById('result_area');

        btn.disabled = true; spinner.style.display = 'block'; btnText.innerText = 'Drafting...'; resultArea.style.display = 'none';

        try {
            const res = await fetch(`${API_BASE}/generate-draft`, {
                method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload)
            });
            
            if (res.status === 429) throw new Error("Too many requests! Please wait a minute.");
            if (!res.ok) throw new Error("AI Engine is currently overloaded.");

            const data = await res.json();
            
            // Append the Proof string to the AI draft
            currentDraft = data.draft + "\n\n*** Please find attached proof of my transaction and prior communications. ***";
            currentEmail = data.target_email;
            currentSubject = `URGENT LEGAL GRIEVANCE: Order ${payload.order_id} - ${payload.user_name}`;
            
            document.getElementById('target_email').innerText = currentEmail;
            document.getElementById('draft_text').innerText = currentDraft;
            resultArea.style.display = 'block';
            resultArea.scrollIntoView({ behavior: 'smooth', block: 'center' });

        } catch (err) {
            alert("Error: " + err.message);
        } finally {
            btn.disabled = false; spinner.style.display = 'none'; btnText.innerText = 'Draft Legal Notice ‚ö°';
        }
    }

    function sendMail(provider) {
        const bcc = "thesoverignsentinel@gmail.com";
        const subject = encodeURIComponent(currentSubject);
        const body = encodeURIComponent(currentDraft);
        const to = encodeURIComponent(currentEmail);
        
        let url = "";
        
        if (provider === 'gmail') {
            url = `https://mail.google.com/mail/?view=cm&fs=1&to=${to}&bcc=${bcc}&su=${subject}&body=${body}`;
        } else if (provider === 'outlook') {
            url = `https://outlook.live.com/mail/0/deeplink/compose?to=${to}&bcc=${bcc}&subject=${subject}&body=${body}`;
        } else if (provider === 'yahoo') {
            url = `https://compose.mail.yahoo.com/?to=${to}&bcc=${bcc}&subject=${subject}&body=${body}`;
        } else {
            // Default mailto protocol (Apple Mail / Windows Mail)
            url = `mailto:${to}?bcc=${bcc}&subject=${subject}&body=${body}`;
        }
        
        window.open(url, '_blank');
    }
</script>
</body>
</html>