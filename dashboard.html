<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Karma Claims | Active Case Dashboard</title>
    <style>
        :root {
            --primary: #1a365d; --secondary: #2563eb; --accent: #dc2626; 
            --success: #16a34a; --bg: #f8fafc; --surface: #ffffff; 
            --border: #e2e8f0; --text: #0f172a; --text-muted: #64748b;
            --warning-bg: #fffbeb; --warning-text: #b45309; --warning-border: #fcd34d;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif; }
        body { background: var(--bg); color: var(--text); padding: 20px; line-height: 1.5; }
        .wrapper { max-width: 1000px; margin: 0 auto; }

        .scoreboard { background: var(--primary); color: white; padding: 20px; border-radius: 8px; text-align: center; margin-bottom: 30px; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); }
        .scoreboard h2 { font-size: 32px; font-weight: 800; margin-bottom: 5px; color: #60a5fa; }
        .scoreboard p { font-size: 15px; opacity: 0.9; }

        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .widget { background: var(--surface); border: 1px solid var(--border); border-radius: 8px; padding: 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.02); }
        .widget h3 { color: var(--primary); font-size: 16px; border-bottom: 1px solid var(--border); padding-bottom: 10px; margin-bottom: 15px; display: flex; justify-content: space-between; align-items: center;}
        
        input, select, textarea { width: 100%; padding: 10px; border: 1px solid #cbd5e1; border-radius: 6px; font-size: 14px; margin-bottom: 10px; }
        input[type="file"] { border: 1px dashed var(--secondary); background: #eff6ff; cursor: pointer; }
        
        button { background: var(--secondary); color: white; border: none; padding: 10px 15px; border-radius: 6px; font-weight: 600; cursor: pointer; width: 100%; transition: 0.2s; }
        button:hover { background: #1d4ed8; }
        button.success-btn { background: var(--success); }
        button.success-btn:hover { background: #15803d; }
        button:disabled { opacity: 0.7; cursor: not-allowed; }
        
        .alert-box { background: #eff6ff; border-left: 4px solid var(--secondary); padding: 12px; font-size: 13px; margin-top: 10px; border-radius: 0 6px 6px 0; display: none; }
        .warning-box { background: var(--warning-bg); border-left: 4px solid var(--warning-border); color: var(--warning-text); padding: 12px; font-size: 13px; margin-top: 10px; border-radius: 0 6px 6px 0; display: none; }
        .result-text { font-size: 13px; background: #f8fafc; padding: 10px; border-radius: 6px; border: 1px solid var(--border); margin-top: 10px; white-space: pre-wrap; display: none; }

        .tip-jar { text-align: center; background: #fef2f2; border: 2px dashed #f87171; padding: 20px; border-radius: 8px; margin-top: 20px; display: none; }
        .tip-jar img { width: 150px; height: 150px; margin-top: 10px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);}

        /* ‚îÄ‚îÄ TOAST & COPY BUTTON (From Claude) ‚îÄ‚îÄ */
        .toast { position: fixed; top: 20px; right: 20px; background: var(--primary); color: white; padding: 12px 20px; border-radius: 8px; font-weight: bold; font-size: 14px; box-shadow: 0 4px 12px rgba(0,0,0,0.15); z-index: 9999; animation: slideIn 0.3s ease; }
        @keyframes slideIn { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
        .copy-btn { background: #e2e8f0; color: var(--primary); font-size: 11px; padding: 4px 8px; border-radius: 4px; border: none; width: auto; cursor: pointer; display: inline-block; margin-left: 10px;}
        .copy-btn:hover { background: #cbd5e1; }

        /* ‚îÄ‚îÄ CHAT STYLES (Upgraded) ‚îÄ‚îÄ */
        #chat-widget { position: fixed; bottom: 20px; right: 20px; width: 320px; background: white; border: 1px solid var(--border); border-radius: 12px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); display: none; flex-direction: column; z-index: 2000; overflow: hidden; }
        #chat-header { background: var(--primary); color: white; padding: 12px; font-weight: bold; display: flex; justify-content: space-between; cursor: pointer; }
        #chat-body { height: 250px; overflow-y: auto; padding: 15px; font-size: 13px; background: #f8fafc; }
        #chat-input-area { border-top: 1px solid var(--border); padding: 10px; display: flex; gap: 8px; background: white;}
        #chat-input-area input { margin: 0; }
        #chat-input-area button { width: auto; }
        #chat-toggle { position: fixed; bottom: 20px; right: 20px; background: var(--primary); color: white; width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: 0 4px 6px rgba(0,0,0,0.1); font-weight: bold; z-index: 1999; font-size: 24px;}
        .bot-msg { background: white; padding: 8px 12px; border-radius: 8px; margin-bottom: 10px; border: 1px solid #e2e8f0; color: #334155; }
        .user-msg { background: var(--secondary); color: white; padding: 8px 12px; border-radius: 8px; margin-bottom: 10px; align-self: flex-end; margin-left: 20px; }
        
        /* ‚îÄ‚îÄ TYPING INDICATOR ‚îÄ‚îÄ */
        .typing { display: flex; gap: 4px; padding: 10px 12px; background: white; border: 1px solid var(--border); border-radius: 8px; width: fit-content; margin-bottom: 10px;}
        .dot { width: 6px; height: 6px; background: #94a3b8; border-radius: 50%; animation: bounce 1.4s infinite ease-in-out both; }
        .dot:nth-child(1) { animation-delay: -0.32s; } .dot:nth-child(2) { animation-delay: -0.16s; }
        @keyframes bounce { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1); } }

        .back-nav { margin-bottom: 20px; display: inline-block; text-decoration: none; color: var(--secondary); font-weight: 600; font-size: 14px; }
        #confetti-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 9998; }
    </style>
</head>
<body>

<div class="wrapper">
    <a href="index.html" class="back-nav">‚Üê Back to Generator</a>

    <div class="scoreboard">
        <h2>‚Çπ<span id="total_recovered">0</span></h2>
        <p>Total Recovered | <span id="cases_won">0</span> Cases Won | <span id="active_users">0</span> Active Users Today</p>
    </div>

    <div class="widget" style="margin-bottom: 20px;">
        <h3>Select Your Active Case</h3>
        <p style="font-size: 12px; color: var(--text-muted); margin-bottom: 10px;">Search our verified database or type any company name.</p>
        
        <input list="company_list" id="case_company" placeholder="Start typing (e.g., Zomato)..." onchange="loadTimelineAndMatrix()">
        <datalist id="company_list">
            <option value="Amazon India (Amazon Seller Services Pvt Ltd)"><option value="Flipkart (Flipkart Internet Pvt Ltd)"><option value="Myntra (Myntra Designs Pvt Ltd)"><option value="Meesho (Fashnear Technologies Pvt Ltd)"><option value="Nykaa (FSN E-Commerce Ventures)"><option value="Ajio (Reliance Retail Ltd)"><option value="Tata CLiQ (Tata UniStore Ltd)"><option value="Snapdeal (Snapdeal Pvt Ltd)"><option value="Swiggy (Bundl Technologies Pvt Ltd)"><option value="Zomato (Zomato Ltd)"><option value="Blinkit (Blink Commerce Pvt Ltd)"><option value="Zepto (Kiranakart Technologies Pvt Ltd)"><option value="BigBasket (Supermarket Grocery Supplies)"><option value="JioMart (Reliance Retail Ltd)"><option value="Licious (Delightful Gourmet Pvt Ltd)">
            <option value="Google Pay (Google India Digital Services)"><option value="PhonePe (PhonePe Pvt Ltd)"><option value="Paytm (One97 Communications Ltd)"><option value="CRED (Dreamplug Technologies Pvt Ltd)"><option value="BharatPe (Resilient Innovations Pvt Ltd)"><option value="MobiKwik (One MobiKwik Systems Ltd)"><option value="Freecharge (Freecharge Payment Technologies)"><option value="Amazon Pay (Amazon Pay India Pvt Ltd)"><option value="Slice (Garagepreneurs Internet Pvt Ltd)"><option value="Jupiter (Amica Financial Technologies)">
            <option value="HDFC Bank (HDFC Bank Limited)"><option value="SBI (State Bank of India)"><option value="ICICI Bank (ICICI Bank Limited)"><option value="Axis Bank (Axis Bank Limited)"><option value="Kotak Mahindra Bank (Kotak Mahindra Bank Ltd)"><option value="Punjab National Bank (PNB)"><option value="Bank of Baroda (BoB)"><option value="IndusInd Bank (IndusInd Bank Limited)"><option value="IDFC First Bank (IDFC FIRST Bank Ltd)"><option value="Yes Bank (YES BANK Limited)">
            <option value="Ola Cabs (ANI Technologies Pvt Ltd)"><option value="Uber India (Uber India Systems Pvt Ltd)"><option value="Rapido (Roppen Transportation Services)"><option value="MakeMyTrip (MakeMyTrip India Pvt Ltd)"><option value="Goibibo (Ibibo Group Pvt Ltd)"><option value="EaseMyTrip (Easy Trip Planners Ltd)"><option value="Yatra (Yatra Online Ltd)"><option value="Cleartrip (Cleartrip Pvt Ltd)"><option value="RedBus (Ibibo Group Pvt Ltd)"><option value="IRCTC (Indian Railway Catering and Tourism Corp)">
            <option value="Reliance Jio (Reliance Jio Infocomm Ltd)"><option value="Bharti Airtel (Bharti Airtel Ltd)"><option value="Vodafone Idea (Vi)"><option value="BSNL (Bharat Sanchar Nigam Limited)"><option value="ACT Fibernet (Atria Convergence Technologies)"><option value="Hathway (Hathway Cable & Datacom Ltd)"><option value="Excitel (Excitel Broadband Pvt Ltd)">
            <option value="Byju's (Think & Learn Pvt Ltd)"><option value="Unacademy (Sorting Hat Technologies)"><option value="PhysicsWallah (PhysicsWallah Pvt Ltd)"><option value="Vedantu (Vedantu Innovations Pvt Ltd)"><option value="UpGrad (UpGrad Education Pvt Ltd)"><option value="Simplilearn (Simplilearn Solutions Pvt Ltd)"><option value="Cuemath (CueLearn Pvt Ltd)">
            <option value="IndiGo (InterGlobe Aviation Ltd)"><option value="Air India (Air India Ltd)"><option value="SpiceJet (SpiceJet Ltd)"><option value="Akasa Air (SNV Aviation Pvt Ltd)"><option value="Air India Express (Air India Express Ltd)">
            <option value="Samsung India (Samsung India Electronics)"><option value="Apple India (Apple India Pvt Ltd)"><option value="Xiaomi India (Xiaomi Technology India)"><option value="OnePlus India (OPlus Mobitech India)"><option value="Dell India (Dell International Services)"><option value="HP India (HP India Sales Pvt Ltd)"><option value="Lenovo India (Lenovo India Pvt Ltd)"><option value="LG India (LG Electronics India Pvt Ltd)"><option value="Sony India (Sony India Pvt Ltd)"><option value="boAt Lifestyle (Imagine Marketing Ltd)"><option value="Urban Company (UrbanClap Technologies)">
        </datalist>

        <div id="unverified_warning" class="warning-box">
            <strong>‚ö†Ô∏è Unverified Company:</strong> This company is not in our Top 75 Database. <br><br>
            <button onclick="requestVerification()" style="background: var(--warning-text); color: white; width: auto; font-size: 12px; padding: 6px 12px; margin-top: 5px;">Request Verification (24-Hour SLA)</button>
        </div>
    </div>

    <div class="grid">
        <div class="widget">
            <h3>‚è≥ Escalation Timeline & Matrix</h3>
            <div id="timeline_alert" class="alert-box">Select or type a company above to calculate your legal deadlines.</div>
            <p style="font-size: 13px; margin-top: 15px; color: var(--text-muted);"><strong>Attack Vectors:</strong></p>
            <div id="matrix_alert" class="alert-box" style="background: #fef2f2; border-left-color: var(--accent);"></div>
        </div>

        <div class="widget">
            <h3>üïµÔ∏è Corporate BS Detector</h3>
            <p style="font-size: 12px; color: var(--text-muted); margin-bottom: 10px;">Paste their confusing reply here. AI will decode their stalling tactics.</p>
            <textarea id="bs_input" rows="4" placeholder="e.g., 'Please provide a Level 2 authorization ID...'"></textarea>
            <button onclick="detectBS()" id="bs_btn">Analyze Email</button>
            <div id="bs_result" class="result-text"></div>
        </div>
    </div>

    <div class="grid">
        <div class="widget">
            <h3>‚öñÔ∏è Gov e-Daakhil Integration</h3>
            <p style="font-size: 12px; color: var(--text-muted); margin-bottom: 10px;">Auto-generate your official Consumer Court formatting.</p>
            <div style="background: #f1f5f9; border: 1px dashed var(--border); padding: 20px; text-align: center; border-radius: 8px;">
                <h4 style="color: var(--primary); margin-bottom: 5px;">üöÄ Coming Soon</h4>
                <p style="font-size: 13px; color: var(--text-muted);">We are currently integrating directly with the Gov e-Daakhil portal to auto-generate your legal PDFs. This feature unlocks next month.</p>
            </div>
        </div>

        <div class="widget">
            <h3>üèÜ Case Closed?</h3>
            <p style="font-size: 12px; color: var(--text-muted); margin-bottom: 10px;">Did our notice force them to refund you? Attach proof so we can shout you out!</p>
            <input type="number" id="win_amount" placeholder="Amount Recovered (‚Çπ)">
            <input type="file" id="win_screenshot" accept="image/png, image/jpeg" title="Upload Proof (Optional)">
            <button class="success-btn" onclick="reportWin()" id="win_btn">I Got My Refund!</button>
            <div id="win_result" class="alert-box" style="background: #f0fdf4; border-color: var(--success); font-weight: bold; font-size: 14px; text-align: center;"></div>

            <div id="tip_jar" class="tip-jar">
                <h4 style="color: #b91c1c; font-size: 16px;">‚òï Support Karma Claims</h4>
                <p style="font-size: 13px; color: #475569; margin-top: 5px;">Built by a solo founder. If we helped you get your money back, consider buying us a coffee via UPI!</p>
                <img src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=upi%3A%2F%2Fpay%3Fpa%3Dss.aggarwal.17%40okaxis%26pn%3DKarma%2520Claims" alt="UPI QR Code">
                <p style="font-size: 12px; margin-top: 5px; font-weight: bold;">ss.aggarwal.17@okaxis</p>
            </div>
        </div>
    </div>
</div>

<div id="chat-toggle" onclick="toggleChat()">üí¨</div>
<div id="chat-widget">
    <div id="chat-header" onclick="toggleChat()"><span>Karma AI Strategist</span><span>&times;</span></div>
    <div id="chat-body" id="chat_messages"><div class="bot-msg">Hi! I'm your AI legal strategist. What hurdle is the company throwing at you today?</div></div>
    <div id="chat-input-area">
        <input type="text" id="chat-input" placeholder="Ask me anything..." onkeydown="if(event.key==='Enter') sendToChat()">
        <button onclick="sendToChat()">Send</button>
    </div>
</div>

<canvas id="confetti-canvas"></canvas>

<script>
    const API_BASE = "https://karma-claims-backend.onrender.com";

    // UX: Toast Notification
    function showToast(msg) {
        const t = document.createElement('div');
        t.className = 'toast'; t.innerText = `‚úì ${msg}`;
        document.body.appendChild(t);
        setTimeout(() => t.remove(), 3000);
    }

    // UX: Copy to Clipboard
    function copyText(text) {
        navigator.clipboard.writeText(text).then(() => showToast('Copied to clipboard!'));
    }

    // UX: Animated Numbers
    function animateNum(id, to, duration = 1500) {
        const el = document.getElementById(id);
        const start = performance.now();
        function update(now) {
            const progress = Math.min((now - start) / duration, 1);
            const easeOut = 1 - Math.pow(1 - progress, 3);
            el.innerText = Math.floor(to * easeOut).toLocaleString('en-IN');
            if (progress < 1) requestAnimationFrame(update);
        }
        requestAnimationFrame(update);
    }

    // UX: Confetti Cannon
    function launchConfetti() {
        const canvas = document.getElementById('confetti-canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth; canvas.height = window.innerHeight;
        const colors = ['#2563eb', '#16a34a', '#dc2626', '#fbbf24', '#8b5cf6'];
        const pieces = Array.from({length: 100}, () => ({
            x: Math.random() * canvas.width, y: -20,
            r: 4 + Math.random() * 6, d: 2 + Math.random() * 5,
            c: colors[Math.floor(Math.random() * colors.length)],
            tilt: Math.random() * 10, tiltAngle: 0, tiltAngleInc: (0.05 + Math.random() * 0.05)
        }));
        let angle = 0;
        function render() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            pieces.forEach(p => {
                p.tiltAngle += p.tiltAngleInc; p.y += (Math.cos(angle + p.d) + 1 + p.r / 2) / 2;
                p.x += Math.sin(angle); p.tilt = Math.sin(p.tiltAngle) * 15;
                ctx.beginPath(); ctx.lineWidth = p.r; ctx.strokeStyle = p.c;
                ctx.moveTo(p.x + p.tilt + p.r, p.y); ctx.lineTo(p.x + p.tilt, p.y + p.tilt + p.r); ctx.stroke();
            });
            angle += 0.01;
            if (pieces.some(p => p.y < canvas.height)) requestAnimationFrame(render);
            else ctx.clearRect(0, 0, canvas.width, canvas.height);
        }
        render();
    }

    window.onload = async function() {
        try {
            const res = await fetch(`${API_BASE}/api/dashboard`);
            const data = await res.json();
            animateNum("total_recovered", data.total_recovered);
            animateNum("cases_won", data.cases_won);
            animateNum("active_users", data.active_users);
        } catch (e) { console.error("Scoreboard API offline"); }
    };

    function requestVerification() {
        const company = document.getElementById("case_company").value.trim();
        const subject = encodeURIComponent(`URGENT: Karma Claims Database Addition - ${company}`);
        const body = encodeURIComponent(`Hi,\n\nPlease verify the Nodal Officer details and regulatory framework for ${company}.\n\nI need to escalate my claim.\n\nThanks.`);
        window.location.href = `mailto:thesoverignsentinel@gmail.com?subject=${subject}&body=${body}`;
    }

    async function loadTimelineAndMatrix() {
        const company = document.getElementById("case_company").value.trim();
        if (!company) return;

        const timelineBox = document.getElementById("timeline_alert");
        const matrixBox = document.getElementById("matrix_alert");
        const warningBox = document.getElementById("unverified_warning");
        
        try {
            const resT = await fetch(`${API_BASE}/api/timeline/${encodeURIComponent(company)}`);
            if (resT.ok) {
                const dataT = await resT.json();
                timelineBox.style.display = "block";
                timelineBox.innerHTML = `<strong>Level 1 Deadline:</strong> ${dataT.level_1_deadline}<br><strong>Escalation Date:</strong> ${dataT.ombudsman_escalation_date || dataT.consumer_court_date}<br><br><em>${dataT.warning}</em>`;
                warningBox.style.display = dataT.unverified ? "block" : "none";
            }

            const resM = await fetch(`${API_BASE}/api/matrix/${encodeURIComponent(company)}`);
            if (resM.ok) {
                const dataM = await resM.json();
                matrixBox.style.display = "block";
                matrixBox.innerHTML = `<strong>1. Direct Email:</strong> ${dataM.step_1_email} 
                ${dataM.step_1_email.includes('@') ? `<button class="copy-btn" onclick="copyText('${dataM.step_1_email}')">Copy</button>` : ''}<br>
                <strong>2. Pressure:</strong> ${dataM.step_2_social_pressure}<br>
                <strong>3. Portal:</strong> <a href="${dataM.step_3_portal}" target="_blank">Click Here</a>`;
            }
        } catch (e) { showToast("Error loading case data."); }
    }

    async function detectBS() {
        const input = document.getElementById("bs_input").value;
        if (!input) { showToast("Paste an email first!"); return; }
        
        const btn = document.getElementById("bs_btn"); const result = document.getElementById("bs_result");
        btn.innerText = "Analyzing..."; btn.disabled = true;

        try {
            const res = await fetch(`${API_BASE}/api/detect-bs`, { method: "POST", headers: { "Content-Type": "application/json" }, body: JSON.stringify({ corporate_reply: input }) });
            const data = await res.json();
            
            // Format BS Badge
            let analysisHtml = data.analysis;
            if(analysisHtml.toLowerCase().includes("illegal")) analysisHtml = `<strong style="color:red">[ILLEGAL DEMAND DETECTED]</strong><br>` + analysisHtml;
            else if (analysisHtml.toLowerCase().includes("stalling")) analysisHtml = `<strong style="color:#b45309">[STALLING TACTIC DETECTED]</strong><br>` + analysisHtml;
            
            result.style.display = "block"; result.innerHTML = analysisHtml;
        } catch (e) { result.innerText = "Error connecting to AI."; result.style.display = "block"; }
        
        btn.innerText = "Analyze Email"; btn.disabled = false;
    }

    async function reportWin() {
        const amount = document.getElementById("win_amount").value;
        const company = document.getElementById("case_company").value.trim();
        const fileInput = document.getElementById("win_screenshot");
        
        if (!amount || !company) { showToast("Please enter amount and select company."); return; }
        
        const btn = document.getElementById("win_btn"); 
        btn.innerText = "Submitting..."; btn.disabled = true;
        const hasFile = fileInput.files.length > 0;

        try {
            const res = await fetch(`${API_BASE}/api/report-outcome`, { 
                method: "POST", headers: { "Content-Type": "application/json" }, 
                body: JSON.stringify({ amount_recovered: parseFloat(amount), company_name: company, has_screenshot: hasFile }) 
            });
            const data = await res.json();
            
            document.getElementById("win_result").style.display = "block"; 
            document.getElementById("win_result").innerHTML = `üéâ BOOM! You beat them. Proof uploaded. Keep an eye on our Instagram!`;
            if (data.new_total) animateNum("total_recovered", data.new_total);
            
            document.getElementById("tip_jar").style.display = "block";
            launchConfetti();
            btn.style.display = "none";
            
        } catch (e) { showToast("Error reporting outcome."); btn.innerText = "I Got My Refund!"; btn.disabled = false; }
    }

    function toggleChat() {
        const widget = document.getElementById('chat-widget');
        widget.style.display = widget.style.display === 'flex' ? 'none' : 'flex';
        if(widget.style.display === 'flex') document.getElementById('chat-input').focus();
    }

    async function sendToChat() {
        const input = document.getElementById('chat-input'); const body = document.getElementById('chat-body');
        const msg = input.value.trim(); if (!msg) return;
        
        body.innerHTML += `<div style="display:flex; flex-direction:column;"><div class="user-msg">${msg}</div></div>`;
        input.value = ''; body.scrollTop = body.scrollHeight;

        // Add Typing Indicator
        const typingId = "type-" + Date.now();
        body.innerHTML += `<div id="${typingId}" class="typing"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>`;
        body.scrollTop = body.scrollHeight;

        try {
            const res = await fetch(`${API_BASE}/api/chat`, { method: "POST", headers: { "Content-Type": "application/json" }, body: JSON.stringify({ user_message: msg }) });
            const data = await res.json();
            document.getElementById(typingId).remove();
            body.innerHTML += `<div class="bot-msg">${data.reply}</div>`;
        } catch (e) { 
            document.getElementById(typingId).remove();
            body.innerHTML += `<div class="bot-msg" style="color:red">AI Strategist is offline right now.</div>`; 
        }
        body.scrollTop = body.scrollHeight;
    }
</script>
</body>
</html>